Данный код представляет из себя симуляцию общения ведущего (Master) и ведомого (Slave) устройств по протоколу HDLC.

Код выполнен в виде бесконечного цикла в файле main.c, вызывающего функции конечных автоматов устройств.

Используя файл user.h можно задать начальные условия симуляции, такие как размер информационного поля, его содержание, саму команду, а также добавить или убрать дополнительную отладочную информацию, используя представленные define. 

Основная логика кода заключена в конечные автоматы состояний для Master и Slave (fsm.h). Состояния и их описания можно увидеть в соответствующих файлах fsm.

В файлах hdlc.c и hdlc.h находятся функции для передачи, приём и верификации данных, а также описание команд и их реализация.

В файле fifo.h описаны и реализованы функции работы с буффером FIFO.

Также был добавлен файл CMakeLists.txt для использования утилитой CMake.

Посокольку код является бесконечным циклом, рекомендуется запускать его в режиме отладки, предварительно поставив точку останова на вызов одного из конечных автоматов.

UPD 1:

В файле user.h ОБЯЗАТЕЛЬНО ВЫБРАТЬ DEFINE ИСПОЛЬЗУЕМОЙ ПЛАТФОРМЫ!

В файле timer.h описаны функции для вычисления времени, используя библиотеку <time.h>. Благодая этому в конечном автомате реализованы таймауты на случай отстутствия ответа от ведомого: при истечении таймера ведущий начинает новую отправку. Также появился переход из состояния отправки в состояние приёма для SLAVE, в случае, если в FIFO появляется новое сообщение.
